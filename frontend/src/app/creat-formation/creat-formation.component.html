<div class="back">
  <div class="container">
    <div class="row">
      <div class="col-8 offset-2">
        <form class="was-validated" [formGroup]="createfr" (ngSubmit)="userSubmit()">
          <h1>Create Training</h1>

          <div class="form-floating">
            <input type="text" class="form-control" formControlName="name" placeholder="Training Title" id="name" required>
            <label for="name">Training Title</label>
          </div>

          <div class="form-floating">
            <input type="text" class="form-control" formControlName="description" placeholder="Description" id="description" required>
            <label for="description">Description</label>
          </div>

          <h3>Date of Training</h3>
          <input type="date" class="date" formControlName="startDate">
          <input type="date" class="date" formControlName="endDate">

          <div class="form-floating">
            <input type="text" class="form-control" formControlName="place" placeholder="Place of Training" id="place" required>
            <label for="place">Place of Training</label>
          </div>

		  <h3>Image Upload</h3>
          <input type="file" (change)="onImageSelected($event)">

          <div *ngIf="selectedFile">
            <h4>Uploaded Image Preview:</h4>
            <img [src]="selectedFile" alt="Uploaded Image" style="max-width: 100%; height: auto;">
          </div>

          <div class="form-floating">
            <input type="text" class="form-control" formControlName="trainerId" placeholder="Trainer ID" id="trainerId" required>
            <label for="trainerId">Trainer ID</label>
          </div>

          <div class="form-floating">
            <input type="text" class="form-control" formControlName="trainingLevel" placeholder="Training Level" id="trainingLevel" required>
            <label for="trainingLevel">Training Level</label>
          </div>

          <div class="form-floating">
            <input type="text" class="form-control" formControlName="trainingCategory" placeholder="Training Category" id="trainingCategory" required>
            <label for="trainingCategory">Training Category</label>
          </div>

          <h3>Curriculum</h3>
          <div formArrayName="curriculum">
            <div *ngFor="let item of curriculum.controls; let i = index">
              <div [formGroupName]="i">
                <div class="form-floating">
                  <input type="text" class="form-control" formControlName="title" placeholder="Title" id="title-{{i}}">
                  <label for="title-{{i}}">Title</label>
                </div>
                <div class="form-floating">
                  <textarea class="form-control" formControlName="content" placeholder="Content" id="content-{{i}}"></textarea>
                  <label for="content-{{i}}">Content</label>
                </div>
                <button type="button" (click)="removeCurriculum(i)">Remove</button>
              </div>
            </div>
            <button type="button" (click)="addCurriculum()">Add Curriculum</button>
          </div>

          <h3>Requirements</h3>
          <div formArrayName="requirements">
            <div *ngFor="let requirement of requirements.controls; let i = index">
              <div class="form-floating">
                <input type="text" class="form-control" [formControlName]="i" placeholder="Requirement" id="requirement-{{i}}">
                <label for="requirement-{{i}}">Requirement</label>
              </div>
              <button type="button" (click)="removeRequirement(i)">Remove</button>
            </div>
            <button type="button" (click)="addRequirement()">Add Requirement</button>
          </div>

          <input class="bt" type="submit" value="Create Training">
        </form>
      </div>
    </div>
  </div>
</div>
